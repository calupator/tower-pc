<html>
<head>
<title>
14.1  Physical Address Formation
</title>
<body>
<a name="14-01"></a>
Prev: <a href="chp14-00.htm">Chapter 14  80386 Real-Address Mode</a><br>
Next: <a href="chp14-02.htm">14.2  Registers and Instructions</a>
<hr>
<h2>
14.1  Physical Address Formation
</h2>
<p>
The 80386 provides a one Mbyte + 64 Kbyte memory space for an 8086 program.
Segment relocation is performed as in the 8086: the 16-bit value in a
segment selector is shifted left by four bits to form the base address of a
segment. The effective address is extended with four high order zeros and
added to the base to form a linear address as Figure 14-1 illustrates. (The
linear address is equivalent to the physical address, because paging is not
used in real-address mode.) Unlike the 8086, the resulting linear address
may have up to 21 significant bits. There is a possibility of a carry when
the base address is added to the effective address. On the 8086, the carried
bit is truncated, whereas on the 80386 the carried bit is stored in bit
position 20 of the linear address.
<p>
Unlike the 8086 and 80286, 32-bit effective addresses can be generated (via
the address-size prefix); however, the value of a 32-bit address may not
exceed 65535 without causing an exception. For full compatibility with 80286
real-address mode, pseudo-protection faults (interrupt 12 or 13 with no
error code) occur if an effective address is generated outside the range 0
through 65535.
<p>
<p>
<a name="F-14-01"></a>
<h3>Figure 14-1.  Real-Address Mode Address Formation</h3>
<p>
<pre>
                      19                                3       0
                     +---------------------------------+---------+
         BASE        |     16-BIT SEGMENT SELECTOR     | 0 0 0 0 |
                     +---------------------------------+---------+

         +
                      19        15                              0
                     +---------+---------------------------------+
         OFFSET      | 0 0 0 0 |    16-BIT EFFECTIVE ADDRESS     |
                     +---------+---------------------------------+

         =
                    20                                          0
         LINEAR    +---------------------------------------------+
         ADDRESS   | X X X X X X X X X X X X X X X X X X X X X X |
                   +---------------------------------------------+
</pre>
<p>
<hr>
Prev: <a href="chp14-00.htm">Chapter 14  80386 Real-Address Mode</a><br>
Next: <a href="chp14-02.htm">14.2  Registers and Instructions</a>
</body>
</html>
